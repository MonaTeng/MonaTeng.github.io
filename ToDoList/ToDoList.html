<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>待辦事項</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center mb-4">To-Do List</h1>
        <div class="mb-3">
            <div class="input-group">
                <input type="text" class="form-control" id="taskInput" placeholder="Enter the task...">
                <button class="btn btn-outline-secondary" onclick="addTask()">Add</button>
            </div>
        </div>
        <ul class="list-group" id="taskList"></ul>
        <button class="btn btn-outline-info mt-3" onclick="completeSelectedTasks()">Done</button>
    </div>

    <!-- Bootstrap JS, Popper.js, and jQuery -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        function addTask() {
            const taskInput = document.getElementById('taskInput');
            const taskText = taskInput.value.trim();

            if (taskText !== '') {
                const taskList = document.getElementById('taskList');

                // Create list item with checkbox
                const listItem = document.createElement('li');
                listItem.classList.add('list-group-item', 'd-flex', 'justify-content-between', 'align-items-center');
                listItem.innerHTML = `
                    <div class="form-check">
                        <input class="form-check-input me-2" type="checkbox">
                        <input class="form-control" type="text" value="${taskText}" readonly>
                    </div>
                    <div>
                        <button class="btn btn-outline-warning btn-sm me-2" onclick="editTask(this)">Edit</button>
                        <button class="btn btn-outline-danger btn-sm" onclick="deleteTask(this)">Delete</button>
                    </div>
                `;

                // Append list item to task list
                taskList.appendChild(listItem);

                // Clear input
                taskInput.value = '';
            }
        }

        function editTask(button) {
            const listItem = button.closest('li');
            const taskInput = listItem.querySelector('input[type="text"]');
            const editButton = listItem.querySelector('.btn-outline-warning');

            if (taskInput.readOnly) {
                // Enable editing by removing the readonly attribute
                taskInput.removeAttribute('readonly');
                // Change button text to "Save"
                editButton.innerText = 'Save';
            } else {
                // Disable editing by adding the readonly attribute
                taskInput.setAttribute('readonly', true);
                // Change button text back to "Edit"
                editButton.innerText = 'Edit';
            }
        }

        function deleteTask(button) {
            const listItem = button.closest('li');
            listItem.remove();
        }

        function completeSelectedTasks() {
            const selectedItems = document.querySelectorAll('input[type="checkbox"]:checked');

            selectedItems.forEach(function (checkbox) {
                const listItem = checkbox.closest('li');
                listItem.remove();
            });
        }
    </script>
</body>
</html>
